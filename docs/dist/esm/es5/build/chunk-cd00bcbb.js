import{h}from"../maplestory-skills.core.js";function processSkills(e,l,r){var i={},o=0;Object.keys(l).forEach(function(r){var t=l[r];o+=e[t.prop],i[t.prop]={locked:!1,required:void 0,limitReached:!1}}),o>72&&(e[r.prop]-=o-72),Object.keys(l).forEach(function(r){var t=l[r];t.skillRequirements&&t.skillRequirements.forEach(function(l){e[l.skill.prop]<l.level&&(i[t.prop].locked=!0,e[t.prop]=0)}),i[t.prop].limitReached=o>=72}),e.skills=i}function toggleSkillRequirements(e,l,r){if(l.skillRequirements){var i=!1;l.skillRequirements.forEach(function(l){if(e[l.skill.prop]<l.level){var o=r?"Level "+l.level+"+":void 0;e.skills[l.skill.prop].required!==o&&(e.skills[l.skill.prop].required=o,i=!0)}}),i&&(e.skills=Object.assign({},e.skills))}}function renderLevelControls(e,l,r,i,o){return void 0===i&&(i=!1),Object.keys(l).map(function(t){var s=l[t],n=e.skills[s.prop];return h("ms-skill",Object.assign({class:s.prop,skill:s,level:e[s.prop],locked:n.locked,required:n.required,limitReached:n.limitReached,disabled:!r,loop:r,onLevelchanged:function(l){return e.levelChanged(s,l.detail)},onMouseEnter:function(){return n.locked&&toggleSkillRequirements(e,s,!0)},onMouseLeave:function(){return n.locked&&toggleSkillRequirements(e,s,!1)},extras:i},o))})}function toSkillChangeEventObject(e,l,r){var i={skills:Object.keys(l).map(function(r){var i=l[r];return{skill:i.name,attr:i.attr,prop:i.prop,level:e[i.prop],minLevel:i.minLevel,maxLevel:i.maxLevel}})};return r&&(i.other=Object.keys(r).map(function(e){return{attr:e,value:r[e]}})),i}export{processSkills as a,toSkillChangeEventObject as b,renderLevelControls as c};